---
Title: New Relic の無料プランを約 1 年間ほど使ってみた感想
Category:
- NewRelic
Date: 2022-12-10T00:00:00+09:00
URL: https://kikuchi-et-al.hatenablog.jp/entry/2022/12/10/000000
EditURL: https://blog.hatena.ne.jp/kikuchi_et_al/kikuchi-et-al.hatenablog.jp/atom/entry/4207112889943594764
---

[f:id:kikuchi_et_al:20221209163353p:plain]

はじめましての方ははじめまして、そうでない方はこんにちは。どうも菊池宣明（[@kikulabo](https://twitter.com/kikulabo)）です。

[New Relic Advent Calendar 2022](https://qiita.com/advent-calendar/2022/newrelic) というものに参加したので New Relic に関するブログを1 本書きました。

このブログを通して少しでも役立つ情報を提供できたら幸いです。

---

# 前置き

友人と一緒に開発をしたサービスに New Relic を導入して約 1 年間ほど経過しました。

このサービスはまだ収益が出ているものでは無いため、コストの観点から New Relic の無料プランの範囲内で利用しています（ New Relic さん本当にごめんなさい）。

この記事では実際に無料プランを 1 年間使ってみてどうだったか、注意するべき点は何かについて書いていきます。

# New Relic 料金体系について

まず、無料プランの話の前に現在の New Relic の料金体系について簡単に説明します。

<参考記事>

[https://newrelic.com/jp/pricing:embed:cite]

2022 年 12 月時点では取り込まれたデータ量とコア/フルプラットフォームユーザ数に応じて料金が変わってくるモデルになっています。

New Relic の料金モデルは他のサービスと比べると特徴的であり、一般的なモニタリングサービスとの相違点を以下にまとめました。

  - 一般的な SaaS 系のモニタリングサービス
      - 監視エージェントの導入台数分だけ課金が発生
      - 例えばスケールアウト等でインスタンスの台数が増えるとその分課金が追加で発生する
      - サービスを利用するユーザ数が増えても請求金額は変わらない
  - New Relic
      - コア/フルプラットフォームユーザ数単位での課金形式
      - 監視対象のホストがいくつ増えても課金額は変わらない
      - 無料で追加できるベーシックユーザというものも存在するが機能が限られておりダッシュボードとログの確認程度しか出来ない

このような違いがあるのでモニタリングツールを選ぶ際は、どんな権限を持ったユーザをどれくらい発行する必要があるのか、監視対象のホストがどれくらい存在するのかを考慮してみると良いのかなと考えています。

# New Relic の無料プランに含まれている内容

**1 名分の無料フルプラットフォームユーザーと取り込みデータ量が 1 カ月当たり 100 GB までが無料プランの範囲内です。**

フルプラットフォームユーザというのは名前の通り New Relic の全ての機能を利用できる権限を持ったユーザのことを指します。

僕たちが開発しているサービスで現状 New Relic 周りの設定をしているのは僕 1 人だけなので、今のところ 1 ユーザに制限されていても特に問題を感じたことはありませんでした。

また、 データ取り込み量に関しても 1 カ月で約 30 GB 程度しか発生していないため、僕たちが作っているサービスでは問題無くクリアしています。

# New Relic を導入してみた所感

そもそもモニタリングって必要なの？という所から、とあるインシデントをきっかけに New Relic の導入を行い信頼性向上を目指した結果、チーム内で以下のような変化が起きました。

## 過去を振り返り分析してから行動するようになった

メトリクスの計測と比較を行えるようになったので何かしらのイベントを新規に開催する際に、過去のデータを参考にして負荷に耐えられるかどうかを事前に判断し行動できるようになりました。

また、僕たちはちょっと特殊な使い方もしているのですが、 New Relic Flex を使って登録ユーザ数やマッチング数等といったデータをメトリクスとして取得し、ダッシュボード上に表示させ KPI 分析を行うようにしています。

ダッシュボードにまとめてしまえばベーシックユーザでも閲覧することが出来るので、週に 1 回メトリクスを一通り確認し、結果を考察、次に僕らがやるべきことを考え行動するといった流れをチーム内に浸透させることが出来ました（この流れを癖付けるまでに半年以上かかりました）。

## エラーの検知および改善を行うきっかけを作れた

これまでエラーは全て Slack に通知するといったことをやっていたので、以下のような問題が発生してました。

- 重要なエラーかどうかがぱっと見分からない
- 定期的に出ているエラーなのかどうかの分析がし辛い
- エラー発生箇所の特定が難しい

こういった課題に対して New Relic の APM を使用することで、どんなエラーが、いつどれくらい発生しているかを可視化することができ、またエラー発生箇所の特定も容易になりました。

影響が小さいエラーに関しては定期的に確認を行うようにしており、実際にこの機能のおかげでバグを検知し直すこともできました。

# 無料プランを使用する際に気をつけなければいけないこと

無料プランの範囲内で使う際に気をつけないといけないポイントとして、個人的には Synthetic チェックの回数制限を注意する必要があるのかなと考えています。

フルプラットフォームユーザであれば New Relic Synthetic のモニターを作成することは出来るもののチェック回数に制限があるため、無料利用枠だとメトリクスの取得頻度をそこそこ延ばさないとモニターを作成することが出来ません。

一方、 New Relic Synthetic のうち Ping モニターに関してはチェック数を消費しないため、要件が合うならこちらを利用する分には問題無いのかなと思います。

※ New Relic Synthetics の Ping モニター は ICMP Ping ではなく、 HTTP クライアントとして WEB ページの HTML ソースを取得するものです。

<参考記事>

[https://newrelic.com/jp/blog/how-to-relic/newrelic-synthetics-overview:embed:cite]

僕たちのサービスでは New Relic Synthetics を使わずに自前の監視ツールを使用してチェックを行うようにしています。

---

実は Advent Calendar 用に投稿しようと思ってたネタが他の人と被ってしまい急遽内容を変更して記事を投稿しました（言い訳）。

最後まで読んで頂きありがとうございました。
